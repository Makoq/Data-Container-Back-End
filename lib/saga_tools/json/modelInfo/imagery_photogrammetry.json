{"Version":"1.0","author":"HfT Stuttgart (c) 2013","library_description":"Photogrammetry tools.","library_name":"imagery_photogrammetry","tools":[{"author":"HfT Stuttgart (c) 2013","parameters":[{"inputs":[{"constraints":"","description":"List of Measured Points as PC","identifier":"POINTS","name":"Measured Points (PC)","optional":"false","type":"Point Cloud (input)"}]},null,{"optionals":[{"constraints":"Default: 0.000000","description":"Focal Length in mm","identifier":"F","name":"Focal Length (mm)","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Pixel Width in micro meters","identifier":"W","name":"Pixel Width (um)","type":"Floating point"},{"constraints":"Default: 0","description":"Do you wish to estimate Principal Point Offsets?","identifier":"EST_OFFSETS","name":"Estimate Principal Point Offsets?","type":"Boolean"},{"constraints":"Default: 0.000000","description":"Principal Point Offset in X","identifier":"ppX","name":"Principal Point Offset in X (pixels)","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Principal Point Offset in Y","identifier":"ppY","name":"Principal Point Offset in Y (pixels)","type":"Floating point"},{"constraints":"Default: 0","description":"Do you wish to provide the Radial Distortion Parameters?","identifier":"GIVE_DISTORTIONS","name":"Provide Radial Distortion Parameters?","type":"Boolean"},{"constraints":"Default: 0.000000","description":"K1","identifier":"K1","name":"K1","type":"Floating point"},{"constraints":"Default: 0.000000","description":"K2","identifier":"K2","name":"K2","type":"Floating point"},{"constraints":"Default: 0.000000","description":"K3","identifier":"K3","name":"K3","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Approximate Coordinate","identifier":"Xc","name":"X","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Approximate Coordinate","identifier":"Yc","name":"Y","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Approximate Coordinate","identifier":"Zc","name":"Z","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Approximate Coordinate","identifier":"Xt","name":"X","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Approximate Coordinate","identifier":"Yt","name":"Y","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Approximate Coordinate","identifier":"Zt","name":"Z","type":"Floating point"},{"constraints":"","description":"The file to write the Calculation Results to.","identifier":"OUTPUT FILE","name":"Output Text File","type":"File path"}]}],"tool_description":"Single Image Spatial Resection (Terrestrial): from at least 3 image points with known coordinates, the Cardan angles of the image orientation and the coordinates of the perspective center are calculated by a least-squares adjustment. The Cardan angles refer to the following transformation between image coordinates (x_image) and global coordinates (X_Global): \n\t x_image = R_1(omega) * R_2(kappa) * R_3(alpha) * X_Global \n Here R_1, R_2, R_3 denote rotation matrices of a right-handed (passive) coordinate transformation.\n\nThe inputs consist of a point cloud containing the identical points with their pixel indices as additional attributes. The origin of pixels is in the lower left corner of the image. The interior orientation parameters of the camera is to be provided. These include Focal Length (mm), Pixel Size (um), Principal Point Offsets (pixels) and optionally the Radial Distortion Parameters. The distortion model being used is as follows: \n\t x_d = x_u (1 - dR)\n\t y_d = y_u (1 - dR) \n where, dR = K1 * r_u ^ 2 + K2 * r_u ^ 4 + K3 * r_u ^ 6,\n r_u ^ 2  = x_u ^ 2 + y_u ^ 2,\n x_u, y_u are the undistorted (corrected) image coordinates in mm,\n x_d, y_d are the distorted (observed) image coordinates in mm,\n K1 is in [mm ^ -2], K2 is in [mm ^ -4],  K3 is in [mm ^ -6].\nApproximate coordinates in [m] for the Projection Center and the center of image are also to be provided.\n\nFollowing the adjustment the results are written to a text file. The main contents of the text file are: for each iteration the Sum of Squared Residuals, the A-Posteriori Standard Deviation (Sigma Naught) and the Condition of Normal Matrix, and the final estimated exterior orientation parameters (Xc, Yc, Zc, Omega, Kappa, Alpha).\n\n Optionally the Principal Point Offsets can be estimated. This requires at least 4 image points as input.\n\n[Warning] The tool is dedicated to the terrestrial case which means the viewing direction must be sufficiently different from the vertical direction.\nThe estimation of Principal Point Offsets is not recommended if the condition of the Normal Matrix is less than 10 ^ -7.\n\n","tool_id":"0","tool_name":"Resection (Terrestrial)","tool_path":"http://geomodeling.njnu.edu.cn/OpenGMS/page/model-item-info/model-item-info.html?OTMzOTRlZmQtOWViYS00NjExLTljY2UtODgxOWJmMGQ4MGU4ODU=","oid":"","stateId":"","mdlId":""},{"author":"HfT Stuttgart (c) 2013","parameters":[{"inputs":[{"constraints":"","description":"RGB Image","identifier":"rgbImage","name":"RGB Image","optional":"false","type":"Grid (input)"},{"constraints":"","description":"Points to be Colorised","identifier":"PC_IN","name":"Points to be Colorised","optional":"false","type":"Point Cloud (input)"}]},{"outputs":[{"constraints":"","description":"Colorised Point Cloud","identifier":"PC_OUT","name":"Colorised Point Cloud","optional":"false","type":"Point Cloud (output)"}]},{"optionals":[{"constraints":"","description":"","identifier":"rgbImage_GRIDSYSTEM","name":"Grid system","type":"Grid system"},{"constraints":"Default: 0","description":"Do you wish to provide the time stamp of Image?","identifier":"GIVE_TIME","name":"Provide Time stamp of Image?","type":"Boolean"},{"constraints":"Default: 0.000000","description":"Time stamp of Image","identifier":"IMG_TIME","name":"Time stamp of Image","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Acceptable Time Difference between Image and Laser Points","identifier":"TIME_DIFF","name":"Time Difference between Image & Points","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Focal Length in mm","identifier":"F","name":"Focal Length (mm)","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Pixel Width in micro meters","identifier":"W","name":"Pixel Width (um)","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Principal Point Offset in X","identifier":"ppX","name":"Principal Point Offset in X (pixles)","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Principal Point Offset in Y","identifier":"ppY","name":"Principal Point Offset in Y (pixels)","type":"Floating point"},{"constraints":"Default: 0","description":"Do you wish to provide the Radial Distortion Parameters?","identifier":"GIVE_DISTORTIONS","name":"Provide Radial Distortion Parameters?","type":"Boolean"},{"constraints":"Default: 0.000000","description":"K1","identifier":"K1","name":"K1","type":"Floating point"},{"constraints":"Default: 0.000000","description":"K2","identifier":"K2","name":"K2","type":"Floating point"},{"constraints":"Default: 0.000000","description":"K3","identifier":"K3","name":"K3","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Projection Centre","identifier":"Xc","name":"Projection Centre - X","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Projection Centre","identifier":"Yc","name":"Projection Centre - Y","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Projection Centre","identifier":"Zc","name":"Projection Centre - Z","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Rotation Angle","identifier":"omega","name":"Omega","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Rotation Angle","identifier":"kappa","name":"Kappa","type":"Floating point"},{"constraints":"Default: 0.000000","description":"Rotation Angle","identifier":"alpha","name":"Alpha","type":"Floating point"}]}],"tool_description":"This tool attaches the color information from a RGB image to Laser Points.\n The RGB Image and the Point Cloud to be colorised are the inputs along with the interior and exterior orientation parameters of the camera. The necessary interior orientation parameters are Focal Length (mm), Pixel Size (um), Principal Point Offsets (pixels) and optionally the Radial Distortion Parameters. The distortion model being used is as follows: \n\t x_d = x_u (1 - dR)\n\t y_d = y_u (1 - dR) \n where, dR = K1 * r_u ^ 2 + K2 * r_u ^ 4 + K3 * r_u ^ 6,\n r_u ^ 2  = x_u ^ 2 + y_u ^ 2,\n x_u, y_u are the undistorted (corrected) image coordinates in mm,\n x_d, y_d are the distorted (observed) image coordinates in mm,\n K1 is in [mm ^ -2], K2 is in [mm ^ -4],  K3 is in [mm ^ -6].\nThe necessary exterior orientation parameters are the coordinates of the Projection Center and the Cardan angles Omega, Kappa and Alpha. The Cardan angles refer to the following transformation between image coordinates (x_image) and global coordinates (X_Global): \n x_image = R_1(omega) * R_2(kappa) * R_3(alpha) * X_Global \n\n [Optional] If the Time Stamp of the RGB Image is given, an acceptable time difference between the points and the image must provided in order to colorise only those points falling that range. If no time is given all points are colorised.\n The result is a colorised point cloud.\n\n","tool_id":"1","tool_name":"Colorisation (PC)","tool_path":"http://geomodeling.njnu.edu.cn/OpenGMS/page/model-item-info/model-item-info.html?MjU0Y2ExNGMtMTEzMC00Zjc4LTkzODQtYTJmYmFiMjA5ZTgyYzY=","oid":"5b90e7bbd15d75093cb58788","stateId":"4564B41D-8F62-431c-B8FD-DDBEF75F0347","mdlId":"8681C1C1-F7C4-4bc5-9226-8C5CE83C46E1"}]}